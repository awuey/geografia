const EUROPE = {
¬† "üåä Morza i zatoki": [
¬† ¬† "≈ör√≥dziemne","Czarne","Marmara","P√≥≈Çnocne","Norweskie","Bia≈Çe","Ba≈Çtyckie",
¬† ¬† "Adriatyckie","Egejskie","Biskajska","Kana≈Ç La Manche","Botnicka","Fi≈Ñska"
¬† ],
¬† "üèùÔ∏è Wyspy i p√≥≈Çwyspy": [
¬† ¬† "Sycylia","Sardynia","Korsyka","Kreta","Baleary","Islandia","Irlandia",
¬† ¬† "Nowa Ziemia","Svalbard","Wielka Brytania","P≈Çw. Skandynawski","P≈Çw. Iberyjski",
¬† ¬† "P≈Çw. Apeni≈Ñski","P≈Çw. Kolski","P≈Çw. Breto≈Ñski","Jutlandzki","Krym"
¬† ],
¬† "üåæ Niziny / wy≈ºyny": [
¬† ¬† "Wschodnioeuropejska","Nadkaspijska","Czarnomorska","Wo≈Çoska","Francuska",
¬† ¬† "Niemiecka","Wielka Wƒôgierska","Masyw Centralny","Podolska","Bawarska","≈örodkoworosyjska"
¬† ],
¬† "‚õ∞Ô∏è G√≥ry / wulkany": [
¬† ¬† "Alpy (Mont Blanc)","Karpaty (Gerlach)","Ural","Dynarskie","Apeniny",
¬† ¬† "Pireneje","Betyckie","Skandynawskie","Rudy","Wezuwiusz","Etna","Hekla"
¬† ],
¬† "üíß Rzeki i jeziora": [
¬† ¬† "Wo≈Çga","Dunaj","Ren","≈Åaba","Dniepr","Tamiza","Sekwana","Wis≈Ça",
¬† ¬† "Loara","Tag","Duero","Rodan","≈Åadoga","Onega","Balaton","Saimaa"
¬† ]
};

const ASIA = {
¬† "üåä Morza i zatoki": [
¬† ¬† "Arabskie","Po≈Çudniowochi≈Ñskie","≈ª√≥≈Çte","Japo≈Ñskie","Ochockie","Czukockie",
¬† ¬† "≈Åaptiew√≥w","Wschodniosyberyjskie","Czerwone","Bengalska","Perska","Ade≈Ñska"
¬† ],
¬† "üèùÔ∏è Wyspy i p√≥≈Çwyspy": [
¬† ¬† "Cejlon","Archipelag Malajski (Borneo, Jawa, Sumatra, Celebes)","Tajwan",
¬† ¬† "Honsiu","Sachalin","Nowosyberyjskie","Ziemia P√≥≈Çnocna","Kamczatka"
¬† ],
¬† "üåæ Niziny": [
¬† ¬† "Zachodniosyberyjska","Tura≈Ñska","Chi≈Ñska","Gangesu","Indusu","Mezopotamii"
¬† ],
¬† "üèîÔ∏è Wy≈ºyny": [
¬† ¬† "Tybeta≈Ñska","Ira≈Ñska","Mongolska","Pog√≥rze Kazachskie","≈örodkowosyberyjska","Dekan"
¬† ],
¬† "üèúÔ∏è Pustynie": [
¬† ¬† "Gobi","Takla Makan","Rub al-Chali","Kara-Kum"
¬† ],
¬† "‚õ∞Ô∏è G√≥ry": [
¬† ¬† "Himalaje (Mont Everest)","Kunlun","Tienszan","Hindukusz","Kaukaz","A≈Çtaj",
¬† ¬† "Sajany","Pamir","Zagros","Wierchoja≈Ñskie"
¬† ],
¬† "üíß Rzeki": [
¬† ¬† "Jangcy","Huang He","Mekong","Ob","Lena","Jenisej","Angara",
¬† ¬† "Ganges","Indus","Brahmaputra","Tygrys","Eufrat","Amur","Amu-daria","Syr-daria"
¬† ],
¬† "üèûÔ∏è Jeziora": [
¬† ¬† "Bajka≈Ç","Ba≈Çchasz","Morze Martwe","Aralskie"
¬† ]
};

const AFRICA_OCEANIA = {
¬† "üåä Morza i zatoki": [
¬† ¬† "Czerwone", "Gwinejska", "Ade≈Ñska", "Kana≈Ç Mozambicki",
¬† ¬† "Tasmana", "Koralowe", "Arafura", "Zatoka Karpentaria", "Wielka Zatoka Australijska"
¬† ],
¬† "üèùÔ∏è Wyspy i p√≥≈Çwyspy": [
¬† ¬† "Madagaskar", "Kanaryjskie", "Seszelskie", "Komory", "P≈Çw. Somalijski",
¬† ¬† "Tasmania", "Nowa Gwinea", "Hawaje", "Nowa Kaledonia", "Fid≈ºi"
¬† ],
¬† "üåæ Niziny / wy≈ºyny / pustynie": [
¬† ¬† "Wschodnioafryka≈Ñska (Wy≈º.)", "Kotlina Konga", "Libijska (Niz.)",
¬† ¬† "Nullarbor", "Wielki Basen Artezyjski",
¬† ¬† "Sahara (Pust.)", "Kalahari (Pust.)", "Namib (Pust.)",
¬† ¬† "Wielka Pust. Piaszczysta", "Pust. Wiktorii", "Pust. Gibsona"
¬† ],
¬† "‚õ∞Ô∏è G√≥ry / szczyty / wulkany": [
¬† ¬† "Atlas", "Smocze", "Kilimand≈ºaro", "Kenia", "Ruwenzori",
¬† ¬† "Wielkie G√≥ry Wododzia≈Çowe", "G√≥ra Ko≈õciuszki", "Mauna Loa", "Mauna Kea"
¬† ],
¬† "üíß Rzeki i jeziora": [
¬† ¬† "Nil", "Kongo", "Niger", "Limpopo", "Oranje",
¬† ¬† "Murray", "Darling",
¬† ¬† "Wiktoria (Jez.)", "Tanganika (Jez.)", "Malawi (Jez.)", "Czad (Jez.)",
¬† ¬† "Jezioro Eyre"
¬† ],

};
function detectRegionFromFilename() {
  const name = (decodeURIComponent(window.location.pathname).split('/').pop()?.split('.').shift() || '').toLowerCase();
  if (name.includes('azja') || name.includes('asia')) return { data: ASIA, label: 'AZJA' };
  if (name.includes('europa') || name.includes('europe')) return { data: EUROPE, label: 'EUROPA' };
  if (name.includes('afryka') || name.includes('oceania')) return { data: AFRICA_OCEANIA, label: 'AFRYKA' };
  return { data: EUROPE, label: 'EUROPA' };
}

const REGION = detectRegionFromFilename();

function makeRNGFromNow() {
  let x = (Date.now() & 0x7fffffff) || 1;
  return () => {
    x ^= (x << 13);
    x ^= (x >>> 17);
    x ^= (x << 5);
    return (x >>> 0) / 4294967296;
  };
}

function shuffle(array, rng) {
  if (!Array.isArray(array)) return [];
  const a = array.slice();
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(rng() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

function pickN(list, n, rng) {
  if (!Array.isArray(list)) return [];
  if (n >= list.length) return list.slice();
  return shuffle(list, rng).slice(0, n);
}

function renderResults(resultsObj) {
  const container = document.getElementById('results');
  if (!container) return;
  container.innerHTML = '';
  for (const [title, items] of Object.entries(resultsObj)) {
    const box = document.createElement('div');
    box.className = 'box';
    let html = `<h3>${title}</h3><ul>`;
    items.forEach((it, idx) => {
      const id = `${title.replace(/\s+/g,'_')}_${idx}`;
      html += `<li><input type="checkbox" class="item-check" id="${id}"> <label for="${id}">${it}</label></li>`;
    });
    html += `</ul>`;
    box.innerHTML = html;
    container.appendChild(box);
  }
}

document.getElementById('drawBtn')?.addEventListener('click', () => {
  const rng = makeRNGFromNow();
  const results = {};
  Object.keys(REGION.data).forEach(cat => {
    results[cat] = pickN(REGION.data[cat], 3, rng);
  });
  renderResults(results);
});

document.getElementById('submitBtn')?.addEventListener('click', () => {
  const checks = document.querySelectorAll('.item-check');
  let clicked = 0;
  checks.forEach(ch => { if (ch.checked) clicked++; });
  const total = checks.length || 0;
  alert(`Zatwierdzono! Zaznaczono: ${clicked} z ${total} element√≥w.`);
});